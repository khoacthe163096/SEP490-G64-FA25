@model vn.fpt.edu.viewmodels.ServicePackageViewModel
@{
    ViewData["Title"] = "Chỉnh sửa gói dịch vụ";
    Layout = "~/vn.fpt.edu.views/Shared/_DashboardLayout.cshtml";
}

<div class="container mt-3">
    <div class="card shadow-sm">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h5><i class="fas fa-edit"></i> Chỉnh sửa gói dịch vụ</h5>
            <a href="/ServicePackages" class="btn btn-outline-secondary btn-sm"><i class="fas fa-arrow-left"></i> Quay lại</a>
        </div>
        <div class="card-body">
            <form id="editForm">
                <input type="hidden" id="Id" value="@Model.Id" />

                <div class="mb-3">
                    <label class="form-label fw-bold">Tên gói</label>
                    <input type="text" class="form-control" id="Name" value="@Model.Name">
                </div>

                <div class="mb-3">
                    <label class="form-label fw-bold">Mô tả</label>
                    <textarea id="Description" class="form-control">@Model.Description</textarea>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-bold">Giá (VNĐ)</label>
                    <input type="number" id="Price" class="form-control" value="@Model.Price">
                </div>

                <div class="mb-3">
                    <label class="form-label fw-bold">Trạng thái</label>
                    <select id="StatusCode" class="form-select">
                        <option value="ACTIVE" selected="@(Model.StatusCode == "ACTIVE" ? "selected" : null)">Hoạt động</option>
                        <option value="INACTIVE" selected="@(Model.StatusCode == "INACTIVE" ? "selected" : null)">Không hoạt động</option>
                    </select>
                </div>

                <div class="text-end">
                    <button type="submit" class="btn btn-primary px-4">
                        <i class="fas fa-save"></i> Cập nhật
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $('#editForm').on('submit', function(e){
            e.preventDefault();
            const id = $('#Id').val();
            const data = {
                Name: $('#Name').val(),
                Description: $('#Description').val(),
                Price: parseFloat($('#Price').val()) || 0,
                StatusCode: $('#StatusCode').val()
            };
            $.post(`/ServicePackages/Edit/${id}`, data)
                .done(res => {
                    if (res.success) {
                        alert("Cập nhật thành công!");
                        window.location = '/ServicePackages';
                    } else alert("Cập nhật thất bại!");
                })
                .fail(() => alert("Lỗi server!"));
        });
    </script>
}
